[ -z "$TMUX" ] && tmux new-session -A -s main && return

# Aliases

alias df="df -h"
alias du="du -h -d 2"
alias less="less -r"
alias ll="ls -alGh"
alias ls="ls -Gh"
alias lsg="ll | grep"
alias mkdir="mkdir -p"
alias pbc="pbcopy"
alias pbp="pbpaste"
alias psa="ps aux"
alias psg="ps aux | grep "
alias vim="nvim"
alias zmv="noglob zmv -W"

# Completion

autoload -Uz compinit
zstyle ':completion:*' menu select
fpath=(/usr/local/share/zsh/site-functions $fpath)
compinit

# FZF

export FZF_DEFAULT_COMMAND='ag -g ""'
export FZF_DEFAULT_OPTS="--exact"

# PATH

export PATH="/usr/local/sbin:/usr/local/bin:$PATH"
eval "$(rbenv init -)"

# History

HISTSIZE=10000
HISTFILE=$HOME/.zsh_history
SAVEHIST=10000

setopt extended_history
setopt hist_expire_dups_first
setopt hist_ignore_dups
setopt hist_ignore_space
setopt hist_verify
setopt inc_append_history
setopt share_history

# Theme

DEFAULT_USER="$(whoami)"

# Zsh Opts

bindkey -v
bindkey "^R" history-incremental-search-backward
setopt promptsubst

# Custom Local Settings

[ -f ~/.zshrc.local ] && source ~/.zshrc.local

# Plugins

export ZPLUG_HOME=/usr/local/opt/zplug
source $ZPLUG_HOME/init.zsh

zplug "agnoster/3712874", from:gist, use:agnoster.zsh-theme
zplug "modules/git", from:prezto
zplug "zsh-users/zsh-syntax-highlighting", defer:2

if ! zplug check --verbose; then
  zplug install
fi

zplug load

# vim: ft=sh
